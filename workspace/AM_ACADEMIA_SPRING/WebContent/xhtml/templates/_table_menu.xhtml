<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">


   	<ui:composition>
   		<!-- Menu da tabela -->
	   	<p:toolbar id="menuTabela">  
			<p:toolbarGroup align="left">
				<!-- Funcoes CRUD -->  
	        	<p:commandButton  title="novo" icon="ui-icon ui-icon-plus" action="#{bean.showNewEntity}" ajax="true" update=":tabView1:formEntity" disabled="#{not empty disableNew}" />
	        	<p:commandButton  title="deletar"  icon="ui-icon ui-icon-trash" action="#{bean.deletarEntity}" ajax="true" update=":tabView1:tabelaEntity" disabled="#{not empty disableDelete}" />
	        	<p:commandButton  title="Editar" icon="ui-icon ui-icon-pencil" action="#{bean.showEditEntity}" ajax="true" update=":tabView1:formEntity" disabled="#{not empty disableEdit}" />
	        	<p:commandButton  title="atualizar"  icon="ui-icon ui-icon-refresh" action="#{bean.atualizar}" ajax="true" update=":tabView1"/>
	        	<p:commandButton  title="filtro" icon="ui-icon ui-icon-zoomin" disabled="#{not empty disableFilter}" />
	        	<p:separator />  
	        	
	        	<!-- Funcoes extras (opcional) -->
	        	<p:menuButton value="Funções" rendered="#{not empty functions}">
	        	 
	        		<!-- Separacao de cada coluna passada por paramentro (separadas por '|' -->
					<c:forEach var="function" items="${fn:split(functions, '|')}">
					
						<!-- Separacao de cada propriedade de cada coluna (separadas por ',') -->
						<c:set var="properties" value="${fn:split(function, ',')}"/>
						
						<!-- funcao -->
	        			<p:menuitem  value="#{properties[0]}" icon="ui-icon ui-icon-clipboard" action="#{bean[properties[1]]}" ajax="true" update="#{properties[2]}"  />
	        			
	        		</c:forEach>
	        		
	        	</p:menuButton>
	        	<p:separator rendered="#{not empty functions}"/> 
	        	
	        </p:toolbarGroup>
	        
	        
	        <p:toolbarGroup align="right" > 
	        
	        	
	        	<!-- View (Opcional) -->
	        	<p:separator rendered="#{not empty bean.staticViewsLabel}"/> 
	        	<p:toolbarGroup rendered="#{not empty bean.staticViewsLabel}">
	        		Visão:
		        	<p:selectOneMenu value="#{bean.view}"   >
		        		<p:ajax partialSubmit="false" update=":tabView1"
	                      			 process="@form" listener="#{bean.atualizar}"/>
		        		<f:selectItems value="#{bean.staticViewsLabel}" var="label" itemLabel="#{label}" itemValue="#{label}"   />
		        	</p:selectOneMenu>
	       		</p:toolbarGroup>
	        
	        	<!-- Ordenação (Opcional) -->
	        	<p:separator rendered="#{not empty bean.staticFieldsOrderLabel}"/> 
	        	<p:toolbarGroup rendered="#{not empty bean.staticFieldsOrderLabel}">
	        		Ordem:
		        	<p:selectOneMenu value="#{bean.order}"   >
		        		<p:ajax partialSubmit="false" update=":tabView1"
	                      			 process="@form" listener="#{bean.atualizar}"/>
		        		<f:selectItems value="#{bean.staticFieldsOrderLabel}" var="label" itemLabel="#{label}" itemValue="#{label}"   />
		        	</p:selectOneMenu>
	       		</p:toolbarGroup>
        		<p:separator />  
        		
        		<!-- Busca -->
	        	Busca:
	        	<p:focus for="searchField" />
	        	<p:inputText value="#{bean.search}" id="searchField" />
	        	<p:defaultCommand target="btnBuscar"></p:defaultCommand>
	        	<p:commandButton icon="ui-icon ui-icon-check" id="btnBuscar" action="#{bean.atualizar}" ajax="true" update=":tabView1"  />
	        	<p:commandButton icon="ui-icon ui-icon-close"  action="#{bean.resetSearch}" ajax="true" update=":tabView1" />
	        </p:toolbarGroup>
	    </p:toolbar>
	</ui:composition>		
    	
</html>
